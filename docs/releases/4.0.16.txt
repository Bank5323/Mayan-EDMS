Version 4.0.16
==============

Released: XX, 2021

Status: Stable

Changes
-------

Appearance
^^^^^^^^^^

An issue that caused menus to reset and collapse at random was fixed.


Settings
^^^^^^^^

An edge situation that could cause the system restart banner to be
triggered when a user changed their default language or timezone was
fixed.


Other
^^^^^

- Minor fixes merged from version 3.5.11.
- Remove duplicated makefile targets.
- Add keyword arguments to PIL methods.
- Quote parameters of remaining migration query.
- Track user when setting a version active.
- Improve Docker build chapter. Add instructions for using
  a PIP cache and reference the development deployment chapter.
- Add development deployment chapter.
- Fix support link in the menu.
- Update indexing example.


Removals
--------

- None


Upgrade process
---------------

.. include:: partials/upgrade-3.5-4.0.txt


Troubleshooting
---------------

If you observe the errors:

- ``mayan.apps.file_caching.models.CachePartitionFile.DoesNotExist: CachePartitionFile matching query does not exist.``

or:

- ``FileNotFoundError: [Errno 2] No such file or directory: '/var/lib/mayan/document_file_storage/...``

follow the solution outlined in the troubleshooting section: :ref:`troubleshooting-version-4.0`


Backward incompatible changes
-----------------------------

- None


Issues closed
-------------

- :gitlab-issue:`1030` Replace latest_version with version_active in documentation "examples.txt"
- :gitlab-issue:`1035` Support link is broken
- :gitlab-issue:`1038` [s4] GUI menu refreshing every 5 seconds

.. _PyPI: https://pypi.python.org/pypi/mayan-edms/

